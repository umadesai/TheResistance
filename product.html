<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Final Product</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index.html">The Resistance</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About</a>
                    </li>
                    <li>
                        <a href="objectives.html">Objectives</a>
                    </li>
                    <li>
                        <a href="product.html">The Revolution</a>
                    </li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('img/About/arduinoBG.jpeg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <!-- <div class="post-heading">
                        <h1>The Revolution</h1>
                        <span class="meta">Posted by <a href="#">The Resistance</a> on December 10, 2016</span>
                    </div> -->
                    <div class="page-heading">
                        <h1>The Revolution</h1>
                        <hr class="small">
                        <span class="subheading">Our Final Product</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

                    <p><b>We created a resistor sorting machine that introduces resistors one at a time into a resistor measuring circuit, outputs the measured resistance to an lcd screen, and sorts the resistor into an appropriate slot. </b></p>

                    <p>Photos or videos of your final system in action.</p>

                    <p><b>Overall System Diagram</b></p>

                    <a href="#">
                        <img class="img-responsive" src="img/About/SystemsDiagram.png" alt="">
                    </a>
                    <span class="caption text-muted">Full System Diagram</span>
                    
                    <h2 class="section-heading">Electrical Component</h2>

                    <p><b>Basic Voltage Divider Circuit to Measure Resistance</b></p>

                    <p>To measure the resistance, we created a voltage divider, with one known resistor value and one unknown. Using an Arduino, we can analyze the voltage reading in between the two resistors and calculate the ratio of resistance between the two resistors. The current passing through the resistors in series, as shown in the diagram below, is the same. That means:</p>

                    <a href="#">
                        <img class="img-responsive" src="img/product/eq1.png" alt="">
                    </a>

                    <p> Thus, we can calculate the resistance of the unknown resistor using the following equation:</p>

                    <a href="#">
                        <img class="img-responsive" src="img/product/eq2.png" alt="">
                    </a>

                    <a href="#">
                        <img class="img-responsive" src="img/sprint1/circuitdiagram.png" alt="">
                    </a>
                    <span class="caption text-muted">Voltage divider circuit</span>

                    <p>The problem with this design is that the voltage we read is based on the ratio between the two resistor values. The arduino can only accurately read voltage up to a certain point, so the further apart the resistor values get the less accurate our reading will be. We resolved this problem using digital potentiometers to adjust the resistance of the known resistor until it is at the same order of magnitude with the unknown resistance. </p>

                    <p><b>Potentiometers as Adjustable Known Resistors for Voltage Divider Circuit</b></p>

                    <p>We used potentiometers with maximum resistance values of 10 kΩ, 100 kΩ, and 1 MΩ and precisions of 39 Ω, 390 Ω, and 3900 Ω respectively. This allowed us to measure any resistances between 100 Ω and 1 MΩ with reasonable accuracy. </p>

                    <p> Our first step in learning to use the potentiometers was understanding the purpose of each of the 14 pins on each. We used the AD5241 datasheet and online records of projects that used digital potentiometers to annotate and use the pins as shown in the diagram below. </p>

                    <a href="#">
                        <center><img class="img-responsive" src="img/product/fig3.png" alt=""></center>
                    </a>
                    <span class="caption text-muted">Potentiometer top view (left) and annotated schematic showing appropriate connections for a generic AD5241 potentiometer</span>

                    <p>We used an I2C interface to control the potentiometers with an Arduino. This required that we connect the SCL (serial clock input) and SDA (Serial Data Input/Output) pins on each potentiometer to the A5 and A4 analog pins on the Arduino microcontroller respectively. Since we only had one of each of the analog pins we created different addresses for the potentiometers while they share the same pins on the microcontroller. </p>

                    <p> All the potentiometers share a slave address byte of 01011[AD1][AD0], where AD1 and AD0 can be either 1 if connected to 5V, or 0 if connected to ground. The table below explains the AD1 and AD0 connections in each potentiometer and their corresponding addresses.</p>

                    <a href="#">
                        <center><img class="img-responsive" src="img/sprint3/potTable.png" alt=""></center>
                    </a>
                    <span class="caption text-muted">Table explaining the AD1 and AD0 connections in each potentiometer and their corresponding addresses. All the potentiometers share a slave address byte of 01011[AD1][AD0], where AD1 and AD0 can be either 1 if connected to 5V, or 0 if connected to ground.</span>

                    <p>Once the circuitry was complete, we tested and calibrated each potentiometer by measuring the resistance across W1 (wiper) and B1. This is the resistance of what we refer to as the known resistor in the voltage divider circuit. </p>

                    <a href="#">
                        <center><img class="img-responsive" src="img/sprint3/potResistance.png" alt="" ></center>
                    </a>
                    <span class="caption text-muted">Close up schematic of resistance of potentiometer. The Wiper Divides the resistors in parallel: R<sub>WA</sub> and R<sub>WB</sub>, which may change based on the position of the wiper but always add up to the total resistance between A and B: R<sub>AB</sub> </span>

                    Using this process, we were able to get generally close values (±5%) for the test resistors. 

                    <p><b>Relays</b></p>

                    <p> We used relays to make sure that at any given time only one of the potentiometers (with resistance of the desired order of magnitude) was connected to the voltage divider circuit. We used the first relay (labeled S1 in the final circuit schematic) to connect the entire circuit either to power (5V supply) or ground. The other relays help channel the current to the desired digital potentiometer.</p>

                    <p><b>Final Circuit Schematic: Integrating Digital Potentiometers and Relays</b></p>

                    <h2 class="section-heading">Mechanical Component</h2>

                    <p>A detailed description of your mechanical design (CAD images/renderings are appropriate) and any necessary analysis.</p>

                    <p><h2 class="section-heading">Software/Firmware Component</h2> <a href="https://github.com/umadesai/TheResistance"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></p>

                    <p>The software components of the product are all compiled into <a href="https://github.com/umadesai/TheResistance/blob/master/src/arduino/ResistanceTester/ResistanceTester.ino">one program</a>  in Arduino C that coordinates the LCD screen, stepper motor for the wheel, servo motor for the sorter, and reading the resistances using the relays and digital potentiometers. Luckily, all of these processes run on one schedule. The main loop tests the resistance (using the digital potentiometers), prints it to the lcd, moves the sorter wheel, then moves the main wheel so that the next notch is against the wires up top.</p>

                    <p>This program is in src/arduino/ResistanceTester and is the only program being run when the machine is on. The other programs in the Github repository were for testing and building the different subsystems.</p>

                    <p>A detailed description of the firmware design with links to complete source code (github or other repository is helpful).</p>

                    <p>A detailed description of software design with links to complete source code (github or other repository is helpful). Please be sure to include a list of all external software dependencies (eg. OpenCV, Google Voice API, etc.)</p>

                </div>
            </div>
            <!-- Pager -->
            <ul class="pager">
                <li>
                    <a href="budget.html">&larr; Final Budget</a>
                </li>
            </ul>
        </div>
    </article>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <!-- <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li> -->
                        <li>
                            <a href="https://github.com/umadesai/TheResistance">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Copyright &copy; The Resistance 2016</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>
